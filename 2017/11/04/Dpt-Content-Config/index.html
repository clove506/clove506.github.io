	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>C端科室展示内容编辑后台 技术文档 | Hexo</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="摘要C端科室展示内容编辑后台 技术文档">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="C端科室展示内容编辑后台 技术文档"/>
  <meta property="og:site_name" content="Hexo"/>

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Hexo</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>C端科室展示内容编辑后台 技术文档</h2>
					
					<div>
						<span class="post-time">2017-11-04 12:07:49</span>
					</div>	
					

					<div class="article-content">
						<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>C端科室展示内容编辑后台 技术文档</p>
<a id="more"></a>
<h1 id="C端科室展示内容编辑后台-详细设计"><a href="#C端科室展示内容编辑后台-详细设计" class="headerlink" title="C端科室展示内容编辑后台 详细设计"></a>C端科室展示内容编辑后台 详细设计</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>prd 见：[「C端科室展示内容编辑后台PRD」<a href="https://wayknew.com/articles/343" target="_blank" rel="external">https://wayknew.com/articles/343</a>]</p>
<p>主要涉及以下项目：</p>
<ul>
<li>Evans</li>
<li>HdFragments</li>
<li>Civilization</li>
<li>Dagon</li>
<li>Solar</li>
</ul>
<h2 id="Evans已有接口"><a href="#Evans已有接口" class="headerlink" title="Evans已有接口"></a>Evans已有接口</h2><p><strong>机构列表，登录之后进入机构和科室名称搜索页面调用接口:</strong></p>
<p>GET /api/evans/v1/admin/all-organizations</p>
<p>Response :</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">OrganizationListDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Organization</span> </span>&#123;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> organizationId = <span class="number">1</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">string</span> organizationName = <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">repeated</span> Organization organization = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span>  Data data = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">2</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>科室列表，选择机构名称之后返回机构下所有科室:</strong></p>
<p>GET /api/evans/v1/admin/departments?organizationId=1</p>
<p>Response :</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">DepartmentListDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">DepartmentOption</span> </span>&#123;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">string</span> departmentName = <span class="number">2</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> organizationId = <span class="number">3</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">string</span> organizationName = <span class="number">4</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">repeated</span> Department department = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span>  Data data = <span class="number">2</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Evans新增部分"><a href="#Evans新增部分" class="headerlink" title="Evans新增部分"></a>Evans新增部分</h2><h3 id="protobuf定义"><a href="#protobuf定义" class="headerlink" title="protobuf定义"></a>protobuf定义</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ComponentOption</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">    <span class="keyword">repeated</span> Component component = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ComponentDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">        <span class="keyword">repeated</span> Component component = <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span>  Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> type = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> ArticleGroup articleGroup = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> SelfEvaluation selfEvaluation = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> ServiceItem serviceItem = <span class="number">4</span>;</div><div class="line">    <span class="keyword">optional</span> ArticleList articleList = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ArticleGroup</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Group <span class="keyword">group</span> = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">Group</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> icon = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> iconColor = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Article article = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">SelfEvaluation</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> SelfEvaluationData selfEvaluationData = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">SelfEvaluationData</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItem</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> ServiceItemData serviceItemData = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItemListDTO</span> </span>&#123;</div><div class="line">   <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">      <span class="keyword">repeated</span> ServiceItemData serviceItemData = <span class="number">1</span>;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">   <span class="keyword">optional</span> Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItemData</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ArticleList</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Article article = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">GetEvaluationListDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">repeated</span> EvaluationBaseInfo evaluation = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">EvaluationBaseInfo</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> evaluationId = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> evaluationName = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> iconColor = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> icon = <span class="number">4</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> organizationName = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> departmentName = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> updateAt = <span class="number">7</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> groupName = <span class="number">8</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> author = <span class="number">9</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> status = <span class="number">10</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="新增接口详情："><a href="#新增接口详情：" class="headerlink" title="新增接口详情："></a>新增接口详情：</h3><p>除admin登录之后，选择科室之后搜索接口，evas本次主要提供根据科室Id查询所有UI配置信息接口（GET）、增加UI配置信息接口（POST）、修改UI配置信息接口（PATCH），以下是接口详情：</p>
<p><strong>获取科室下所有UI配置:</strong></p>
<p>GET /api/evans/v1/admin/department/component/{departmentId}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Evans.<span class="function">ComponentDTO <span class="title">getCompentByDptId</span><span class="params">(@PathVariable Long departmentId)</span></span></div></pre></td></tr></table></figure>
<p><strong>向科室增加一个栏目</strong></p>
<p>POST /api/evans/v1/admin/department/component</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Common.<span class="function">Result <span class="title">addComponent</span><span class="params">(@ResponseBody Evans.ComponentOption option)</span></span></div></pre></td></tr></table></figure>
<p><strong>向科室修改或删除一个栏目</strong></p>
<p>PATCH /api/evans/v1/admin/department/component</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Common.<span class="function">Result <span class="title">updateComponent</span><span class="params">(@ResponseBody Evans.ComponentOption option)</span></span></div></pre></td></tr></table></figure>
<p><strong>获取科室下所有自测</strong></p>
<p>GET /api/evans/v1/admin/evaluations?departmentId={departmentId}&amp;type={type}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Evans.<span class="function">GetEvaluationListDTO <span class="title">GetEvaluationListDTOByDptId</span><span class="params">(@ParamMap map)</span></span></div></pre></td></tr></table></figure>
<p><strong>获取科室下所有服务</strong></p>
<p>GET /api/evans/v1/admin/department/component/services/{departmentId}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Evans.<span class="function">ServiceItemListDTO <span class="title">getServiceItemListByDptId</span><span class="params">(@PathVariable(<span class="string">"departmentId"</span>)</span> Long departmentId)</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">```# 摘要</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">C端科室展示内容编辑后台 技术文档</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">&lt;!-- more --&gt;</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function"># C端科室展示内容编辑后台 详细设计</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">## 背景</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">prd 见：[「C端科室展示内容编辑后台PRD」https:<span class="comment">//wayknew.com/articles/343]</span></span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">主要涉及以下项目：</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">- Evans</span></div><div class="line"><span class="function">- HdFragments</span></div><div class="line"><span class="function">- Civilization</span></div><div class="line"><span class="function">- Dagon</span></div><div class="line"><span class="function">- Solar</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">## Evans已有接口</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">**机构列表，登录之后进入机构和科室名称搜索页面调用接口:**</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">GET /api/evans/v1/admin/all-organizations</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">Response :</span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">```protobuf</span></div><div class="line"><span class="function">message OrganizationListDTO </span>&#123;</div><div class="line">    message Organization &#123;</div><div class="line">        optional int64 organizationId = <span class="number">1</span>;</div><div class="line">        optional string organizationName = <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    message Data &#123;</div><div class="line">        repeated Organization organization = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    optional  Data data = <span class="number">1</span>;</div><div class="line">    optional Result result = <span class="number">2</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>科室列表，选择机构名称之后返回机构下所有科室:</strong></p>
<p>GET /api/evans/v1/admin/departments?organizationId=1</p>
<p>Response :</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">DepartmentListDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">DepartmentOption</span> </span>&#123;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">string</span> departmentName = <span class="number">2</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> organizationId = <span class="number">3</span>;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">string</span> organizationName = <span class="number">4</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">repeated</span> Department department = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span>  Data data = <span class="number">2</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Evans新增部分-1"><a href="#Evans新增部分-1" class="headerlink" title="Evans新增部分"></a>Evans新增部分</h2><h3 id="protobuf定义-1"><a href="#protobuf定义-1" class="headerlink" title="protobuf定义"></a>protobuf定义</h3><figure class="highlight protobuf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ComponentOption</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">    <span class="keyword">repeated</span> Component component = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ComponentDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">1</span>;</div><div class="line">        <span class="keyword">repeated</span> Component component = <span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span>  Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> type = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> ArticleGroup articleGroup = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> SelfEvaluation selfEvaluation = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> ServiceItem serviceItem = <span class="number">4</span>;</div><div class="line">    <span class="keyword">optional</span> ArticleList articleList = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ArticleGroup</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Group <span class="keyword">group</span> = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">Group</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> icon = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> iconColor = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Article article = <span class="number">5</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">SelfEvaluation</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> SelfEvaluationData selfEvaluationData = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">SelfEvaluationData</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItem</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> ServiceItemData serviceItemData = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItemListDTO</span> </span>&#123;</div><div class="line">   <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">      <span class="keyword">repeated</span> ServiceItemData serviceItemData = <span class="number">1</span>;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">   <span class="keyword">optional</span> Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ServiceItemData</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> id = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> name = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">ArticleList</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> title = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> componentId = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> creatorId = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> departmentId = <span class="number">4</span>;</div><div class="line">    <span class="keyword">repeated</span> Article article = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> categoryId = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> rank = <span class="number">7</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">GetEvaluationListDTO</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">message</span> <span class="title">Data</span> </span>&#123;</div><div class="line">        <span class="keyword">repeated</span> EvaluationBaseInfo evaluation = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">optional</span> Result result = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> Data data = <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">message</span> <span class="title">EvaluationBaseInfo</span> </span>&#123;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> evaluationId = <span class="number">1</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> evaluationName = <span class="number">2</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> iconColor = <span class="number">3</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> icon = <span class="number">4</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> organizationName = <span class="number">5</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> departmentName = <span class="number">6</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> updateAt = <span class="number">7</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> groupName = <span class="number">8</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">string</span> author = <span class="number">9</span>;</div><div class="line">    <span class="keyword">optional</span> <span class="built_in">int64</span> status = <span class="number">10</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="新增接口详情：-1"><a href="#新增接口详情：-1" class="headerlink" title="新增接口详情："></a>新增接口详情：</h3><p>除admin登录之后，选择科室之后搜索接口，evas本次主要提供根据科室Id查询所有UI配置信息接口（GET）、增加UI配置信息接口（POST）、修改UI配置信息接口（PATCH），以下是接口详情：</p>
<p><strong>获取科室下所有UI配置:</strong></p>
<p>GET /api/evans/v1/admin/department/component/{departmentId}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Evans.<span class="function">ComponentDTO <span class="title">getCompentByDptId</span><span class="params">(@PathVariable Long departmentId)</span></span></div></pre></td></tr></table></figure>
<p><strong>向科室增加一个栏目</strong></p>
<p>POST /api/evans/v1/admin/department/component</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Common.<span class="function">Result <span class="title">addComponent</span><span class="params">(@ResponseBody Evans.ComponentOption option)</span></span></div></pre></td></tr></table></figure>
<p><strong>向科室修改或删除一个栏目</strong></p>
<p>PATCH /api/evans/v1/admin/department/component</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Common.<span class="function">Result <span class="title">updateComponent</span><span class="params">(@ResponseBody Evans.ComponentOption option)</span></span></div></pre></td></tr></table></figure>
<p><strong>获取科室下所有自测</strong></p>
<p>GET /api/evans/v1/admin/evaluations?departmentId={departmentId}&amp;type={type}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Evans.<span class="function">GetEvaluationListDTO <span class="title">GetEvaluationListDTOByDptId</span><span class="params">(@ParamMap map)</span></span></div></pre></td></tr></table></figure>
<p><strong>获取科室下所有服务</strong></p>
<p>GET /api/evans/v1/admin/department/component/services/{departmentId}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Evans.<span class="function">ServiceItemListDTO <span class="title">getServiceItemListByDptId</span><span class="params">(@PathVariable(<span class="string">"departmentId"</span>)</span> Long departmentId)</span></div></pre></td></tr></table></figure>

					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  


</div>
	</div>

	

</div>


		<footer>
			

<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 | 搭载 <a href="https://github.com/wayou/hexo-theme-material">material</a> 主题
</p>
<p>
  &copy; 2017 <a href="http://yoursite.com"> John Doe </a>
</p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
