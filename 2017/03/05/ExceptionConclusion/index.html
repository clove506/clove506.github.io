	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>【优护助手-合肥】合肥C端-Exception-Conclusion | Hexo</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="摘要合肥项目-C端-Exception-Conclusion">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="【优护助手-合肥】合肥C端-Exception-Conclusion"/>
  <meta property="og:site_name" content="Hexo"/>

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Hexo</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>【优护助手-合肥】合肥C端-Exception-Conclusion</h2>
					
					<div>
						<span class="post-time">2017-03-05 11:20:00</span>
					</div>	
					

					<div class="article-content">
						<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>合肥项目-C端-Exception-Conclusion<br><a id="more"></a></p>
<h2 id="order"><a href="#order" class="headerlink" title="order"></a>order</h2><h3 id="退款申请"><a href="#退款申请" class="headerlink" title="退款申请"></a>退款申请</h3><p>参数校验：</p>
<ol>
<li>用户id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “patientId null”);</li>
<li>退款原因为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请选择退款原因”);</li>
<li>退款说明字数限制：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “退款说明不能多于200字”);</li>
<li>退款金额为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写退款金额”);</li>
<li>退款金额大小不能小于等于0：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “退款金额填写有误”);</li>
<li>退款金额不能大于支付金额:throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “退款金额不能超过订单实际支付金额”);</li>
<li>退款金额参数类型：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “退款金额只能精确到分”);</li>
</ol>
<h3 id="提交订单"><a href="#提交订单" class="headerlink" title="提交订单"></a>提交订单</h3><p>参数校验：</p>
<ol>
<li>用户Id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userId null”);</li>
<li>患者Id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请选择用户”);</li>
<li>服务时间为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请选择预约时间”);</li>
<li>服务时间为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请选择预约时间”);</li>
<li>当前时间后，30分钟的预约时间可选：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请在当前时间30分钟后进行预约”);</li>
<li>备注字数限制：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “备注字数为0~200”);<br>7.服务时间未来一周内可选，包括当日在内： throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “服务时间未来一周内可选，包括当日在内”);</li>
</ol>
<h3 id="用户提交评价"><a href="#用户提交评价" class="headerlink" title="用户提交评价"></a>用户提交评价</h3><p>参数校验：</p>
<ol>
<li>订单Id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “orderId null”);</li>
<li>评价内容字数限制：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “评价内容不能多于200字”);</li>
<li>评价参数为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请您对该订单进行打分”);</li>
<li>评价分数大小限制：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “评价分数必须在20到100分之间”);</li>
</ol>
<h3 id="用户下单所需信息"><a href="#用户下单所需信息" class="headerlink" title="用户下单所需信息"></a>用户下单所需信息</h3><p>参数校验：</p>
<ol>
<li>用户id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “no userId”);</li>
<li>服务id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “no itemId”);</li>
<li>用户id与服务id的参数类型校验：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userId or itemId format wrong”);</li>
</ol>
<h3 id="查询订单详情"><a href="#查询订单详情" class="headerlink" title="查询订单详情"></a>查询订单详情</h3><p>参数校验：</p>
<ol>
<li>订单Id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “orderId is null”);</li>
</ol>
<p>合法性校验：</p>
<ol>
<li>当前订单是否是该用户的订单：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “操作非法：该订单不属于当前用户”);</li>
<li>订单对应的状态不是状态机中的状态：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “订单有待支付、待接单、待服务等状态，但是没有当前您输入的状态”);</li>
</ol>
<h3 id="订单列表"><a href="#订单列表" class="headerlink" title="订单列表"></a>订单列表</h3><p>参数校验：</p>
<ol>
<li>传参为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “queryMap is null”);</li>
<li>用户Id（userId）、页数（index）、每页显示的数据行数（size）都不能为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “patientId or size or index is null”);</li>
<li>用户Id（userId）、页数（index）、每页显示的数据行数（size）的参数类型：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “patientId or size or index format wrong”);<br>4.页数（index）&gt;0：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “size more than 500”);<br>5.每页显示的数据行数（size）&lt;500行： throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “index &gt; 0”);</li>
<li>订单对应的状态不是状态机中的状态：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “订单有待支付、待接单、待服务等状态，但是没有当前您输入的状态”);</li>
</ol>
<h3 id="退款申请页面信息"><a href="#退款申请页面信息" class="headerlink" title="退款申请页面信息"></a>退款申请页面信息</h3><p>参数校验：</p>
<ol>
<li>订单Id为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “orderId  null”);</li>
</ol>
<h3 id="支付："><a href="#支付：" class="headerlink" title="支付："></a>支付：</h3><p>参数校验：</p>
<ol>
<li>orderId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “orderId null”);</li>
<li>queryMap为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “queryMap is null”);</li>
<li>没有选择支付渠道：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “planId or channel is null”);</li>
<li>当用户发起了支付但是又取消了支付，但是用户又点击了支付按钮，但是状态流转已经到支付中了，没法惊醒支付操作了：throw new YHJException(ShootExceptionCodeEnum.ORDER_PAYING, “订单正在支付中…”);</li>
</ol>
<h3 id="取消订单"><a href="#取消订单" class="headerlink" title="取消订单"></a>取消订单</h3><p>操作处理：</p>
<ol>
<li>订单处于支付中是点击取消订单按钮： throw new YHJException(ShootExceptionCodeEnum.ORDER_PAYING,”如订单未完成支付，将在特定时间后自动取消”);</li>
<li>orderId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “OrderId is Null”);</li>
</ol>
<h3 id="取消退款："><a href="#取消退款：" class="headerlink" title="取消退款："></a>取消退款：</h3><p>参数校验：</p>
<ol>
<li>orderId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “OrderId is Null”);</li>
</ol>
<h3 id="查看协议："><a href="#查看协议：" class="headerlink" title="查看协议："></a>查看协议：</h3><p>参数校验：</p>
<ol>
<li>协议名字为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “protocolName is null”);</li>
<li>itemId不存在：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “itemId must exist”);</li>
<li>服务Id（itemId）对应的服务不存在：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “itemId refer item is not found”);</li>
</ol>
<h2 id="item"><a href="#item" class="headerlink" title="item"></a>item</h2><h3 id="查询医院所提供的服务列表："><a href="#查询医院所提供的服务列表：" class="headerlink" title="查询医院所提供的服务列表："></a>查询医院所提供的服务列表：</h3><p>参数校验：</p>
<ol>
<li>organizationId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “organizationId null”);</li>
<li>用户id对应的department不存在：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “Id refer department does not found”);</li>
</ol>
<h3 id="服务详情："><a href="#服务详情：" class="headerlink" title="服务详情："></a>服务详情：</h3><p>参数校验：<br>1.organizationId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “organizationId null”);<br>2.itemId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “itemid null”);<br>3.服务Id（itemId）对应的服务不存在：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “itemId is wrong”);</p>
<h2 id="userAddress"><a href="#userAddress" class="headerlink" title="userAddress"></a>userAddress</h2><h3 id="查询患者信息"><a href="#查询患者信息" class="headerlink" title="查询患者信息"></a>查询患者信息</h3><p>参数校验：</p>
<ol>
<li>userId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userId is null”);</li>
<li>useraddressId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userAddressId id null”);</li>
<li>userId与UserAddressId参数类型校验：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userId or userAddressId format wrong”);</li>
</ol>
<p>权限校验：</p>
<ol>
<li>userAddressId对应的userAddress不存在：throw new YHJException(ShootExceptionCodeEnum.OBJECT_IS_NOT_FOUND, “该患者不存在”);</li>
<li>根据userAddressId查询的userAddress中对应的userId与传参中的userId不相等：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “抱歉，您没有该操作权限”);</li>
</ol>
<h3 id="新增患者"><a href="#新增患者" class="headerlink" title="新增患者"></a>新增患者</h3><p>参数校验：</p>
<ol>
<li>userId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “userId null”);</li>
<li>姓名为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写患者姓名”);</li>
<li>姓名长度限制：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “患者姓名最大长度为5”);</li>
<li>姓名亦可以为数字，字母和汉字：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “患者姓名填写有误”);</li>
<li>性别为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “性别不能为空”);</li>
<li>性别只能填男女：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请正确填写性别”);</li>
<li>出生日期：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “出生日期不能为空”);</li>
<li>出生日期限制，对应于年龄为0~150岁：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “患者出生日期必须在”+year+”年”+month+”月”+day+”日和当前时间之间”);</li>
<li>手机号为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “手机号不能为空”);</li>
<li>手机号位数：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请正确填写11位手机号”);</li>
<li>手机号格式：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR,”请填写正确的手机号码！”);</li>
<li>服务地址为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写服务地址”);</li>
<li>服务地址省市为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写患者所在省市”);</li>
<li>服务地址城市为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写患者所在城市”);</li>
<li>服务地址所在区为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写患者所在地区”);</li>
<li>服务地址的详细地址为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填写患者所在地区的详细地址”);</li>
<li>用户与患者关系为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请选择与患者关系”);</li>
<li>出生日期格式校验：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “请填正确填写出生日期”);</li>
</ol>
<h3 id="更新患者信息"><a href="#更新患者信息" class="headerlink" title="更新患者信息"></a>更新患者信息</h3><p>参数校验：与新增患者信息一样<br>权限校验：</p>
<ol>
<li>userAddressId对应的userAddress不存在：throw new YHJException(ShootExceptionCodeEnum.OBJECT_IS_NOT_FOUND, “该患者不存在”);</li>
<li>根据userAddressId查询的userAddress中对应的userId与传参中的userId不相等：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “抱歉，您没有该操作权限”);</li>
</ol>
<h3 id="删除患者信息"><a href="#删除患者信息" class="headerlink" title="删除患者信息"></a>删除患者信息</h3><p>参数校验：</p>
<ol>
<li>userId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “no userId”);</li>
<li>userAddressId为空：throw new YHJException(YHJExceptionCodeEnum.OPTION_FORMAT_ERROR, “no userAddressId”);</li>
</ol>
<p>权限校验：与跟新患者信息一样</p>
<h2 id="备注："><a href="#备注：" class="headerlink" title="备注："></a>备注：</h2><p>凡是锁中涉及到永久锁的异常：throw new YHJException(YHJExceptionCodeEnum.LOCK_KEY_EXISTS, “订单正在处理中，请稍后重试”);</p>

					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  


</div>
	</div>

	

</div>


		<footer>
			

<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 | 搭载 <a href="https://github.com/wayou/hexo-theme-material">material</a> 主题
</p>
<p>
  &copy; 2017 <a href="http://yoursite.com"> John Doe </a>
</p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
