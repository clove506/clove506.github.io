	<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>虚拟科室管理后台需求整理 | Hexo</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="摘要虚拟科室后台管理:创建虚拟科室，为虚拟科室和疾病树创建关联关系">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="虚拟科室管理后台需求整理"/>
  <meta property="og:site_name" content="Hexo"/>

  
  
		<!-- favicon -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#009688">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#009688">
		<!-- favicon end -->
    <!-- <link href="/favicon.ico" rel="icon"> -->
  

  <!-- toc -->
  <link rel="stylesheet" href="/libs/tocify/jquery.tocify.css" media="screen" type="text/css">

  <!-- <link rel="stylesheet" href="/libs/bs/css/bootstrap.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.min.css" media="screen" type="text/css">

  <!-- material design -->
	<!-- <link rel="stylesheet" href="/libs/bs-material/css/ripples.min.css" media="screen" type="text/css"> -->
  <link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/ripples.min.css" media="screen" type="text/css">
  <!-- <link rel="stylesheet" href="/libs/bs-material/css/material.min.css" media="screen" type="text/css"> -->
	<link rel="stylesheet" href="//apps.bdimg.com/libs/bootstrap-material/0.3.0/css/material.min.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/highlight.light.css" media="screen" type="text/css">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  

  

  <script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/libs/jquery-2.0.3.min.js" type="text/javascript"><\/script>')</script>

</head>

 	<body>
	  <nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">菜单</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Hexo</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li>
                    <a href="/" title="">
                    <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                <li>
                    <a href="/archives" title="">
                    <i class="fa fa-list"></i>存档
                    </a>
                </li>
                
                <li>
                    <a href="/about" title="">
                    <i class="fa fa-info-circle"></i>关于
                    </a>
                </li>
                
                <li>
                    <a href="/atom.xml" title="这是一个订阅源">
                    <i class="fa fa-rss"></i>RSS
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>

	  <div class="container" >
	    <div class="row">
	
	<div class="col-md-9 center-content">
	

		<div class="content">
			<!-- index -->
		   

			  		<h2>虚拟科室管理后台需求整理</h2>
					
					<div>
						<span class="post-time">2017-03-25 00:00:00</span>
					</div>	
					

					<div class="article-content">
						<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>虚拟科室后台管理:创建虚拟科室，为虚拟科室和疾病树创建关联关系<br><a id="more"></a></p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>虚拟科室: 非具体的科室，具体的科室是附在某个organization（机构）下的，而虚拟科室是不需要附在机构下的。</p>
<p>虚拟科室下可以配置相应的疾病，疾病下有相应的文章，宣教和评估工具。当患者在C端页面关注了某中疾病后，该患者可以看到和疾病相关的文章，宣教和评估工具，从而形成形成患者-机构-疾病-内容的对应关系。虚拟科室管理后台主要业务大致有:</p>
<ul>
<li><p>科室管理</p>
<ul>
<li>新建科室（通用科室或普通科室）</li>
<li>将这些科室与疾病树关联起来（打tag的过程）</li>
</ul>
</li>
<li><p>文章管理</p>
<ul>
<li>新建文章</li>
<li>为文章打tag，即为文章和疾病树建立关系</li>
</ul>
</li>
<li><p>工具管理</p>
<ul>
<li>新建评估工具</li>
<li>为评估工具打tag，即为评估工具和疾病树建立关系</li>
</ul>
</li>
</ul>
<h2 id="场景分析"><a href="#场景分析" class="headerlink" title="场景分析"></a>场景分析</h2><h3 id="创建一个科室的流程（可以是虚拟科室、普通科室）"><a href="#创建一个科室的流程（可以是虚拟科室、普通科室）" class="headerlink" title="创建一个科室的流程（可以是虚拟科室、普通科室）"></a>创建一个科室的流程（可以是虚拟科室、普通科室）</h3><ul>
<li>选择科室类型</li>
<li>填写科室名称</li>
<li><p>为科室创建疾病</p>
<ul>
<li>在已有的疾病树选择tag，将tag和科室关联起来</li>
<li><p>创建新的疾病，但不能和疾病树中的疾病有冲突</p>
<ul>
<li>为新疾病创建tag</li>
<li>将新tag和科室关联起来</li>
</ul>
</li>
</ul>
</li>
<li><p>选择宣教文章</p>
<ul>
<li>根据选中的标签，自动匹配文章</li>
<li>手动选择</li>
<li><p>手动创建新文章</p>
<ul>
<li>将新文章和tag关联起来</li>
</ul>
</li>
</ul>
</li>
<li><p>选择评估工具</p>
<ul>
<li>根据所选标签，自动匹配评估工具</li>
<li>手动选择</li>
<li><p>手动创建</p>
<ul>
<li>将新评估工具和tag关联起来</li>
</ul>
</li>
</ul>
</li>
<li><p>个性化的设置</p>
<ul>
<li>设置Logo</li>
<li>生成二维码</li>
</ul>
</li>
</ul>
<p><img src="/media/virtual_department.png" alt=""></p>
<h2 id="虚拟科室设计方案"><a href="#虚拟科室设计方案" class="headerlink" title="虚拟科室设计方案"></a>虚拟科室设计方案</h2><h3 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h3><p>复用原有的Organization（机构）表，在organization表中添加一个名为type的字段，用来区分通用科室和普通机构。所有的科室都挂在organization下，通过organization的type可以知道该机构下的科室是普通科室还是虚拟科室。</p>
<h3 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h3><p>患者、科室、疾病、宣教、文章、评估之间的关系都是通过tag实现，当给科室打上疾病tag的同时，对应的宣教、文章和评估都为科室形成映射关系。当某个患者进入到科室，关注科室下的某个疾病，也没给该患者打上疾病tag，然后患者就可以阅读关于疾病的宣教、使用评估工具，对自己的身体情况做一些测试，掌握自己的健康情况。</p>
<p><img src="/media/tag-dept-user-relation.png" alt=""></p>
<p>在当前tag系统内置的tag不满足需求的情况下，比如，新建了一个科室，并关联了一个疾病tag,当时自动生成的文章、宣教、评估工具等满足不了需求。可以手动的新建tag。新建的tag进入tag系统。</p>
<h3 id="protobuf数据"><a href="#protobuf数据" class="headerlink" title="protobuf数据"></a>protobuf数据</h3><p>==初步预想，等待设计==</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">message Result &#123;</div><div class="line"></div><div class="line">    optional string msg = 1 ;</div><div class="line">    optional boolean success = 2 ;</div><div class="line">    optional displayMsg = 3 ;</div><div class="line">    optional int64 code = 4 ;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message Organization &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional int64 status = 3;</div><div class="line">    optional string address = 5;</div><div class="line">    optional string lat = 6;</div><div class="line">    optional string lon = 7;</div><div class="line">    optional int64 createdAt = 8;</div><div class="line">    optional int64 updatedAt = 9;</div><div class="line">    optional int32 type = 10 ;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message Department &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional int64 organizationId = 2;</div><div class="line">    optional string name = 3;</div><div class="line">    optional string number = 4;</div><div class="line">    optional string authCode = 5;</div><div class="line">    optional int64 status = 6;</div><div class="line">    optional int64 createdAt = 7;</div><div class="line">    optional int64 updatedAt = 8;</div><div class="line">    optional bool isGuest = 9;</div><div class="line">    optional int64 hostId = 10;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message DepartmentDTO &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional Organization organization = 2;</div><div class="line">    optional string name = 3;</div><div class="line">    optional string number = 4;</div><div class="line">    optional string authCode = 5;</div><div class="line">    optional int64 status = 6;</div><div class="line">    optional int64 createdAt = 7;</div><div class="line">    optional int64 updatedAt = 8;</div><div class="line">    optional bool isGuest = 9;</div><div class="line">    optional int64 hostId = 10;</div><div class="line">    optional Result result = 11 ;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message DepartmentAddOption &#123;</div><div class="line"></div><div class="line">    optional int64 organizationId = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string number = 3;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">message Disease&#123;</div><div class="line"></div><div class="line">    optional int64 id =1;</div><div class="line">    optional string name =2;</div><div class="line">    optional string desc =3;</div><div class="line">    optional boolean hasParentNode = 4;</div><div class="line">    optional boolean isPatentNode = 5;</div><div class="line">    optional int64 parentId = 6;</div><div class="line">    optional int64 departmentId = 7;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message DiseaseDTO&#123;</div><div class="line"></div><div class="line">    optional int64 id =1;</div><div class="line">    optional string name =2;</div><div class="line">    optional string desc =3;</div><div class="line">    optional boolean hasParentNode = 4;</div><div class="line">    optional boolean isPatentNode = 5;</div><div class="line">    optional int64 parentId = 6;</div><div class="line">    optional Department department = 7;</div><div class="line">    optional Result result = 8;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message DiseaseListDTO&#123;</div><div class="line"></div><div class="line">    repeated Disease disease = 1 ;</div><div class="line">    optional Result result = 2 ;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">message DiseaseListOption&#123;</div><div class="line">    repeated int64 id =1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">message Article &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string brief = 3;</div><div class="line">    optional string content = 4;</div><div class="line">    optional string bannerUrl = 5;</div><div class="line">    optional string dataType = 6;</div><div class="line">    optional int64 articleTypeId = 7;</div><div class="line">    optional int32 status = 8;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ArticleDTO&#123;</div><div class="line"></div><div class="line">    optional Article article = 1;</div><div class="line">    optional Result result = 2;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">message ArticleListDTO &#123;</div><div class="line"></div><div class="line">    optional Result result = 1;</div><div class="line">    repeated Article article = 2;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ArticleAddOption &#123;</div><div class="line"></div><div class="line">    optional string name = 1;</div><div class="line">    optional string brief = 2;</div><div class="line">    optional string content = 3;</div><div class="line">    optional string bannerUrl = 4;</div><div class="line">    optional string dataType = 5;</div><div class="line">    optional int64 articleTypeId = 6;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ArticleUpdateOption &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string brief = 3;</div><div class="line">    optional string content = 4;</div><div class="line">    optional string bannerUrl = 5;</div><div class="line">    optional string dataType = 6;</div><div class="line">    optional int64 articleTypeId = 7;</div><div class="line">    optional int32 status = 8;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">message Tool&#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string brief = 3;</div><div class="line">    optional string icon = 4;</div><div class="line">    optional string iconColor = 5;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ToolDTO&#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string brief = 3;</div><div class="line">    optional string icon = 4;</div><div class="line">    optional string iconColor = 5;</div><div class="line">    optional Result result = 6;</div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">message ToolListDTO &#123;</div><div class="line"></div><div class="line">    optional Result result = 1;</div><div class="line">    repeated Tool tool = 2;</div><div class="line">    optional Result result = 3;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ToolAddOption &#123;</div><div class="line"></div><div class="line">    optional string name = 1;</div><div class="line">    optional string brief = 2;</div><div class="line">    optional string icon = 3;</div><div class="line">    optional string iconColor = 4;</div><div class="line">    optional int64 departmentId = 5;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ToolUpdateOption &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string brief = 3;</div><div class="line">    optional string icon = 4;</div><div class="line">    optional string iconColor = 5;</div><div class="line">    optional int64 departmentId = 6;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">message departmentArticle &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional int64 departmentId = 2;</div><div class="line">    optional int64 articleId = 3;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message departmentTool &#123;</div><div class="line"></div><div class="line">    optional int64 id = 1;</div><div class="line">    optional int64 departmentId = 2;</div><div class="line">    optional int64 toolId = 3;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">message ArticleCategory&#123;</div><div class="line">    </div><div class="line">    optional int64 id = 1;</div><div class="line">    optional string name = 2;</div><div class="line">    optional string icon_id = 3;</div><div class="line">    optional string icon_color = 4;</div><div class="line">    optional int64 createAt = 5;</div><div class="line">    optional int64 updateAt = 6;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>API定义</p>
<ul>
<li>创建虚拟科室</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/department
</code></pre></blockquote>
<ul>
<li>为虚拟科室和tag建立关联</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/tags/department/{departmentId}
</code></pre></blockquote>
<ul>
<li>获取tag列表</li>
</ul>
<blockquote>
<pre><code>GET /api/vrigo/v1/tags
</code></pre></blockquote>
<ul>
<li>根据tagId获取文章</li>
</ul>
<blockquote>
<pre><code>GET /api/vrigo/v1/articles/{tagId}
</code></pre></blockquote>
<ul>
<li>创建新文章</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/article
</code></pre></blockquote>
<ul>
<li>为文章和tag建立关联</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/tags/article/{articelId}
</code></pre></blockquote>
<ul>
<li>根据articleId获取article</li>
</ul>
<blockquote>
<pre><code>GET /api/vrigo/v1/article/{articleId}
</code></pre></blockquote>
<ul>
<li>根据tagId获取评估工具</li>
</ul>
<blockquote>
<pre><code>GET /api/vrigo/v1/tools/{tagId}
</code></pre></blockquote>
<ul>
<li>创建新的评估工具</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/tool
</code></pre></blockquote>
<ul>
<li>为评估工具和tag建立关联</li>
</ul>
<blockquote>
<pre><code>POST /api/vrigo/v1/tags/tool/{toolId}
</code></pre></blockquote>
<ul>
<li>根据toolId获取tool</li>
</ul>
<blockquote>
<pre><code>GET /api/vrigo/v1/tool/{toolId}
</code></pre></blockquote>
<h2 id="接口详细设计"><a href="#接口详细设计" class="headerlink" title="接口详细设计"></a>接口详细设计</h2><h3 id="创建科室"><a href="#创建科室" class="headerlink" title="创建科室"></a>创建科室</h3><p>POST /api/vrigo/v1/department</p>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>:<span class="string">"优护家虚拟科室"</span>,</div><div class="line">    <span class="attr">"organization"</span>:<span class="number">1</span>,</div><div class="line">    <span class="attr">"number"</span>:<span class="string">"66666"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">    <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">    <span class="attr">"name"</span>:<span class="string">"优护家虚拟科室"</span>,</div><div class="line">    <span class="attr">"number"</span>:<span class="string">"6666"</span>,</div><div class="line">    <span class="attr">"status"</span>:<span class="number">0</span>,</div><div class="line">    <span class="attr">"createdAt"</span>:<span class="number">1491042333</span>,</div><div class="line">    <span class="attr">"updatedAt"</span>: <span class="number">1491042333</span>,</div><div class="line">    <span class="attr">"isGuest"</span>:<span class="literal">true</span>,</div><div class="line">    <span class="attr">"hostId"</span>:<span class="number">1</span>,</div><div class="line">    <span class="attr">"organization"</span>:&#123;</div><div class="line">        <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">        <span class="attr">"name"</span>:<span class="string">"xxx"</span></div><div class="line">    &#125;</div><div class="line">    <span class="string">"result"</span>&#123;</div><div class="line">        <span class="attr">"code"</span>:<span class="number">0</span>,</div><div class="line">        <span class="attr">"displayMsg"</span>:<span class="string">"xxxx"</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="关联科室和tag"><a href="#关联科室和tag" class="headerlink" title="关联科室和tag"></a>关联科室和tag</h3><p>POST /api/vrigo/v1/tags/department/{departmentId}</p>
<h3 id="Request-1"><a href="#Request-1" class="headerlink" title="Request"></a>Request</h3><p>POST /api/vrigo/v1/tags/department/1</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">    [</div><div class="line">       &#123;</div><div class="line">        <span class="attr">"id"</span>:<span class="number">1</span></div><div class="line">       &#125;,</div><div class="line">       &#123;</div><div class="line">        <span class="attr">"id"</span>:<span class="number">2</span></div><div class="line">       &#125; </div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Response-1"><a href="#Response-1" class="headerlink" title="Response"></a>Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">    <span class="attr">"result"</span>:&#123;</div><div class="line">        <span class="attr">"code"</span>:<span class="number">0</span>,</div><div class="line">        <span class="attr">"displayMessage"</span>:<span class="string">"xxxx"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取tag列表"><a href="#获取tag列表" class="headerlink" title="获取tag列表"></a>获取tag列表</h3><p>GET /api/vrigo/v1/tags</p>
<h3 id="Request-2"><a href="#Request-2" class="headerlink" title="Request"></a>Request</h3><p>GET /api/vrigo/v1/tags</p>
<h3 id="Response-2"><a href="#Response-2" class="headerlink" title="Response"></a>Response</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">    [</div><div class="line">        &#123;</div><div class="line">        </div><div class="line">           <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">            <span class="attr">"name"</span>:<span class="string">"疾病树名称"</span>,</div><div class="line">            <span class="attr">"desc"</span>:<span class="string">"XXXXXX"</span></div><div class="line">            <span class="string">"department"</span>:&#123;</div><div class="line">                <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                <span class="attr">"name"</span>:<span class="string">"优护家虚拟科室"</span></div><div class="line">                <span class="string">"organization"</span>:&#123;</div><div class="line">                    <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                    <span class="attr">"name"</span>:<span class="string">"优护家医院"</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>:<span class="number">2</span>，</div><div class="line">            <span class="string">"name"</span>:<span class="string">"疾病树名称"</span>,</div><div class="line">            <span class="attr">"desc"</span>:<span class="string">"XXXXXX"</span></div><div class="line">            <span class="string">"department"</span>:&#123;</div><div class="line">                <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                <span class="attr">"name"</span>:<span class="string">"优护家虚拟科室"</span></div><div class="line">                <span class="string">"organization"</span>:&#123;</div><div class="line">                    <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                    <span class="attr">"name"</span>:<span class="string">"优护家医院"</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        </div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>:<span class="number">3</span>,</div><div class="line">            <span class="attr">"name"</span>:<span class="string">"疾病树名称"</span>,</div><div class="line">            <span class="attr">"desc"</span>:<span class="string">"XXXXXX"</span></div><div class="line">            <span class="string">"department"</span>:&#123;</div><div class="line">                <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                <span class="attr">"name"</span>:<span class="string">"优护家虚拟科室"</span></div><div class="line">                <span class="string">"organization"</span>:&#123;</div><div class="line">                    <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">                    <span class="attr">"name"</span>:<span class="string">"优护家医院"</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        </div><div class="line">        &#125;</div><div class="line">    </div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="根据tagId获取文章列表"><a href="#根据tagId获取文章列表" class="headerlink" title="根据tagId获取文章列表"></a>根据tagId获取文章列表</h3><p>GET /api/vrigo/v1/articles/{tagId}</p>
<h3 id="Request-3"><a href="#Request-3" class="headerlink" title="Request"></a>Request</h3><p>GET /api/vrigo/v1/articles/1</p>
<h3 id="Response-3"><a href="#Response-3" class="headerlink" title="Response"></a>Response</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line"></div><div class="line">    [</div><div class="line">        &#123;    </div><div class="line">            <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">            <span class="attr">"name"</span>:<span class="string">"文章名称"</span>,</div><div class="line">            <span class="attr">"brief"</span>:<span class="string">"文章简介"</span>,</div><div class="line">            <span class="attr">"content"</span>:<span class="string">"文章内容"</span>,</div><div class="line">            <span class="attr">"iconUrl"</span>:<span class="string">"文章图标链接"</span>,    </div><div class="line">            <span class="attr">"dataType"</span>:<span class="string">"xxx"</span>,</div><div class="line">            <span class="attr">"videoUrl"</span>:<span class="string">"xxxx"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>:<span class="number">2</span>,</div><div class="line">            <span class="attr">"name"</span>:<span class="string">"文章名称"</span>,</div><div class="line">            <span class="attr">"brief"</span>:<span class="string">"文章简介"</span>,</div><div class="line">            <span class="attr">"content"</span>:<span class="string">"文章内容"</span>,</div><div class="line">            <span class="attr">"iconUrl"</span>:<span class="string">"文章图标链接"</span>,    </div><div class="line">            <span class="attr">"dataType"</span>:<span class="string">"xxx"</span>,</div><div class="line">            <span class="attr">"videoUrl"</span>:<span class="string">"xxxx"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"id"</span>:<span class="number">3</span>,</div><div class="line">            <span class="attr">"name"</span>:<span class="string">"文章名称"</span>,</div><div class="line">            <span class="attr">"brief"</span>:<span class="string">"文章简介"</span>,</div><div class="line">            <span class="attr">"content"</span>:<span class="string">"文章内容"</span>,</div><div class="line">            <span class="attr">"iconUrl"</span>:<span class="string">"文章图标链接"</span>,    </div><div class="line">            <span class="attr">"dataType"</span>:<span class="string">"xxx"</span>,</div><div class="line">            <span class="attr">"videoUrl"</span>:<span class="string">"xxxx"</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="创建新文章"><a href="#创建新文章" class="headerlink" title="创建新文章"></a>创建新文章</h3><p>POST /api/vrigo/v1/article</p>
<h3 id="Request-4"><a href="#Request-4" class="headerlink" title="Request"></a>Request</h3><p>POST /api/vrigo/v1/article</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>:<span class="string">"文章名称"</span>,</div><div class="line">    <span class="attr">"brief"</span>:<span class="string">"文章简介"</span>,</div><div class="line">    <span class="attr">"content"</span>:<span class="string">"文章内容"</span>,</div><div class="line">    <span class="attr">"iconUrl"</span>:<span class="string">"文章图标链接"</span>,</div><div class="line">    <span class="attr">"author"</span>:<span class="string">"文章作者"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Response-4"><a href="#Response-4" class="headerlink" title="Response"></a>Response</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"id"</span>:<span class="number">1</span>,</div><div class="line">    <span class="attr">"name"</span>:<span class="string">"文章名称"</span>,</div><div class="line">    <span class="attr">"brief"</span>:<span class="string">"文章简介"</span>,</div><div class="line">    <span class="attr">"icon"</span>: = <span class="number">4</span>;</div><div class="line">    optional string iconColor = <span class="number">5</span>;</div><div class="line">    optional Result result = <span class="number">6</span>;</div><div class="line">    optional string dataType = <span class="number">7</span>;</div><div class="line">    optional string videoUrl = <span class="number">8</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="对现有接口的影响"><a href="#对现有接口的影响" class="headerlink" title="对现有接口的影响"></a>对现有接口的影响</h3><p>虚拟科室所属的所在机构不在C端页面显示，所以在C端显示所有机构的接口中需要将虚拟科室的机构名过滤出来，只显示科室名称而不显示其机构名。<br>经调研，发现在yolarClient中有一个获取所有organization的接口，所以可能需要改造这个接口，将该接口查出的organization进行过滤。</p>

					</div>

			  <!-- about -->
			  
		</div>

		<!-- pagination -->
	  

		<div class="comment-section">
  
  


</div>
	</div>

	

</div>


		<footer>
			

<p>
  由 <a href="https://hexo.io">hexo</a> 强力驱动 | 搭载 <a href="https://github.com/wayou/hexo-theme-material">material</a> 主题
</p>
<p>
  &copy; 2017 <a href="http://yoursite.com"> John Doe </a>
</p>
<a id="gotop" href="#" title="back to top"><i class="mdi-hardware-keyboard-arrow-up"></i></a>

		</footer>
	  </div>

		<!-- <script src="/libs/bs/js/bootstrap.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script>(typeof $().modal == 'function')|| document.write('<script src="/libs/bs/js/bootstrap.min.js" type="text/javascript"><\/script>')</script>

		<!-- material design -->
		<!-- <script src="/libs/bs-material/js/ripples.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/ripples.min.js"></script>
		<!-- <script src="/libs/bs-material/js/material.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/bootstrap-material/0.3.0/js/material.min.js"></script>
		<!-- toc -->
		<!-- <script src="/libs/tocify/jquery-ui.min.js"></script> -->
		<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="/libs/tocify/jquery.tocify.custom.js"></script>

		<script src="/js/main.js"></script>

	</body>
</html>
